# Varshney Samaj App - Setup Guide

## ğŸ“‹ Prerequisites

Before running the app, ensure you have:

- âœ… Flutter SDK (3.8.1 or higher)
- âœ… Firebase project created
- âœ… Firebase configuration files in place
- âœ… Android/iOS development environment

## ğŸ”¥ Firebase Setup

### 1. Firebase Console Configuration

1. Go to [Firebase Console](https://console.firebase.google.com)
2. Select your project
3. Enable the following services:

#### **Authentication**
- Navigate to **Authentication** â†’ **Sign-in method**
- Enable **Email/Password** authentication
- (Optional) Enable **Email link (passwordless sign-in)**

#### **Firestore Database**
- Navigate to **Firestore Database**
- Create database (Start in production mode or test mode)
- Set up the following security rules:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users collection
    match /users/{userId} {
      // Allow users to read their own document
      allow read: if request.auth != null && request.auth.uid == userId;
      
      // Allow users to create their own document during registration
      allow create: if request.auth != null && request.auth.uid == userId;
      
      // Allow users to update their own document
      allow update: if request.auth != null && request.auth.uid == userId;
      
      // Admin can read all
      allow read: if request.auth != null && 
                    get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
    
    // Add other collections as needed
  }
}
```

#### **Storage** (if using profile pictures)
- Navigate to **Storage**
- Set up storage rules:

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /users/{userId}/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

### 2. Email Verification Settings

1. Go to **Authentication** â†’ **Templates**
2. Customize the **Email verification** template
3. Add your app/website URL
4. Customize the message to match Varshney Samaj branding

## ğŸ“± App Configuration

### 1. Install Dependencies

```bash
cd /Users/dineshkumar/Documents/vvs_app
flutter pub get
```

### 2. Firebase Configuration Files

Ensure you have:

- **Android**: `android/app/google-services.json`
- **iOS**: `ios/Runner/GoogleService-Info.plist`
- **Web**: `web/index.html` with Firebase config

### 3. Update Firebase Options

The app uses `lib/firebase_options.dart` for configuration. This file should be auto-generated by FlutterFire CLI.

If not present, run:

```bash
# Install FlutterFire CLI
dart pub global activate flutterfire_cli

# Configure Firebase
flutterfire configure --project=your-project-id
```

## ğŸ¨ App Customization

### Logo and Branding

1. Replace `assets/logo.png` with your Varshney Samaj logo
2. Update app icon using:

```bash
flutter pub run flutter_launcher_icons
```

### Theme Colors

Edit `lib/theme/app_colors.dart` to customize:

```dart
static const primary = Color(0xFFFF6F00); // Change this
static const accent = Color(0xFFFF8F00);  // And this
```

## ğŸš€ Running the App

### Development Mode

```bash
# Run on connected device or emulator
flutter run

# Run with hot reload
flutter run --hot
```

### Build for Production

#### Android APK
```bash
flutter build apk --release
```

#### Android App Bundle (for Play Store)
```bash
flutter build appbundle --release
```

#### iOS
```bash
flutter build ios --release
```

## ğŸ§ª Testing the Registration Flow

### Test Cases

1. **Valid Registration**
   - Fill all required fields
   - Use valid email format
   - Use 10-digit mobile number
   - Use 6-digit PIN code
   - Use 12-digit Aadhaar number
   - Password with 6+ characters
   - Should succeed and show success dialog

2. **Invalid Email**
   - Try: `test@test`, `test.com`, etc.
   - Should show "Enter valid email"

3. **Invalid Mobile**
   - Try: `123`, `12345678901`, etc.
   - Should show "Enter valid 10-digit mobile number"

4. **Invalid PIN Code**
   - Try: `123`, `1234567`, etc.
   - Should show "Enter valid 6-digit PIN code"

5. **Invalid Aadhaar**
   - Try: `123`, `1234567890123`, etc.
   - Should show "Enter valid 12-digit Aadhaar"

6. **Weak Password**
   - Try: `123`, `abc`, etc.
   - Should show "Minimum 6 characters"
   - Progress bar should be red

7. **Duplicate Email**
   - Register with same email twice
   - Should show "An account already exists with this email"

8. **Empty Required Fields**
   - Leave required fields empty
   - Should show "Required" error

## ğŸ“Š Monitoring and Analytics

### Recommended Setup

1. **Firebase Analytics**
   ```bash
   flutter pub add firebase_analytics
   ```

2. **Crashlytics**
   ```bash
   flutter pub add firebase_crashlytics
   ```

3. **Performance Monitoring**
   ```bash
   flutter pub add firebase_performance
   ```

## ğŸ”’ Security Best Practices

### Implemented

- âœ… Email normalization (lowercase)
- âœ… Password strength validation
- âœ… Email verification
- âœ… Firestore security rules
- âœ… Input validation and sanitization

### Recommended Additional Steps

1. **Rate Limiting**
   - Use Firebase Extensions for rate limiting
   - Prevent spam registrations

2. **reCAPTCHA**
   - Add reCAPTCHA for web version
   - Prevent bot registrations

3. **Data Encryption**
   - Encrypt sensitive data before storing
   - Use Firebase Functions for server-side validation

## ğŸ“ Environment Variables

For production, consider using environment variables:

```dart
// lib/config/env.dart
class Environment {
  static const bool isProduction = bool.fromEnvironment('PRODUCTION', defaultValue: false);
  static const String apiUrl = String.fromEnvironment('API_URL', defaultValue: 'https://api.example.com');
}
```

Run with:
```bash
flutter run --dart-define=PRODUCTION=true --dart-define=API_URL=https://api.varshney-samaj.com
```

## ğŸ› Troubleshooting

### Common Issues

**1. Firebase not initialized**
```
Solution: Ensure Firebase.initializeApp() is called in main.dart
```

**2. Google Services plugin error**
```
Solution: Check google-services.json is in android/app/ folder
```

**3. Pod install fails (iOS)**
```bash
cd ios
rm -rf Pods Podfile.lock
pod install --repo-update
```

**4. Build fails with multidex error (Android)**
```
Solution: Enable multidex in android/app/build.gradle
```

**5. Storage permission denied**
```
Solution: Add permissions in AndroidManifest.xml and Info.plist
```

## ğŸ“ Support and Maintenance

### Regular Tasks

- Monitor Firebase Console for usage
- Check error logs and crashlytics
- Update dependencies regularly:
  ```bash
  flutter pub upgrade
  ```
- Review user feedback
- Monitor authentication failures
- Check Firestore usage and costs

### Backup Strategy

- Enable Firestore automatic backups
- Export user data regularly
- Keep backup of configuration files

## ğŸ‰ Launch Checklist

Before launching to production:

- [ ] Firebase project in production mode
- [ ] Security rules reviewed and tested
- [ ] Email templates customized
- [ ] App icon and splash screen configured
- [ ] Privacy policy and terms of service linked
- [ ] Analytics and crashlytics enabled
- [ ] All test cases passed
- [ ] Performance tested on various devices
- [ ] Beta testing completed
- [ ] App store listing prepared
- [ ] Support contact information updated

## ğŸ“š Additional Resources

- [Flutter Documentation](https://flutter.dev/docs)
- [Firebase Documentation](https://firebase.google.com/docs)
- [FlutterFire Documentation](https://firebase.flutter.dev)
- [Material Design Guidelines](https://material.io/design)

## ğŸ”„ Updates and Maintenance

To keep the app updated:

```bash
# Check for Flutter updates
flutter upgrade

# Check for dependency updates
flutter pub outdated

# Update dependencies
flutter pub upgrade
```

---

**Note**: This app is designed for the Varshney Samaj community. Ensure all data handling complies with privacy laws and regulations applicable in your region.
